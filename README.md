# VoiceS
根据 ASS 文件将多种类的音频文件切片为指定格式的文件，并生成对应的 .lab 文件

## 计划

支持其他格式的时间轴文件？

## 使用方法

### 下载时间轴工具

下载 [AgeiSub](https://github.com/Aegisub/Aegisub/releases/tag/v3.2.2) 或其他能够根据音频生成 `.ass` 文件的时间轴工具

### 打轴

导入音频文件并生成对应的时间轴，可参考 <https://www.bilibili.com/video/BV19F411w7m5>

注意：

1. 生成的时间轴中每行将会被视为一个“切片”，切片的长度应在 5-15s 为宜，不得超过 2-20s
2. 歌词中不应出现任何标点符号，可以出现空格，也可提前将多音字替换为拼音
3. 若歌词中出现 `长度大于1` 的英文字母（例如拼音）会导致 `excp_file.txt` 中的汉字提示索引错乱（不影响数据输出结果，可以忽略）

### 生成原始数据

注意：若时间轴中某一切片超过 2-20s 的范围，将会报错并跳过**整个文件**，但不会影响到其他文件的处理。

#### 使用命令行运行（默认）

将 `.ass` 文件和 **同名** 的音频文件放置于同一文件夹或其子文件夹下。cd 到 `main.py` 同目录下后输入 `python ./main.py <src> <des>` 命令，程序将会从 `src` 文件夹读取文件，处理后输出到 `des` 文件夹。

例如，数据文件放置于 `/home/admin/src file`，输出文件放置于 `/home/admin/desfile`，那么对应的命令为:
`python ./main.py "/home/admin/src file" /home/admin/des`

#### 直接运行

将 `.ass` 文件和 **同名** 的音频文件放置于 `data` 文件夹或其子文件夹下。cd 到 `data` 文件夹的**根目录**后运行 `main.py`（需将其中第一行的`True`替换为`False`），程序将会从 `data` 文件夹读取文件，处理后输出输出到 `data/output` 文件夹下

### 修正原始数据

在输出目录下（也就是 `des` 或 `data/output`）会生成 `excp_file.txt` 文件，其中记录了超过 5-15s 范围的切片和包含多音字的切片。此时可以根据此文件对 `.lab` 文件进行修正。（当然你也可以头铁直接拿去mfa，此时生成的文件格式上是没有错误的）

注意：若歌词中出现 `长度大于1` 的英文字母（例如拼音）会导致 `excp_file.txt` 中的汉字提示索引错乱（不影响数据输出结果，可以忽略）
